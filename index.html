<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dom Według Śmiechów</title>
    <link rel="icon" href="icon.png" type="image/png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --bg-scale: 0.3;
        }
        
        body {
            font-family: 'Futura', 'Montserrat', sans-serif;
            background-color: #355C32;
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            overflow: hidden;
            position: relative;
        }
        
        body::before {
            content: "";
            position: fixed;
            top: -100%;
            left: -100%;
            width: 300%;
            height: 300%;
            background-image: url('waves.png');
            background-size: calc(5000px * var(--bg-scale)) calc(3333px * var(--bg-scale));
            background-repeat: repeat;
            opacity: 0.18;
            z-index: -1;
            mix-blend-mode: add;
            pointer-events: none;
            animation: scrollBackground 120s linear infinite;
            will-change: background-position;
        }
        
        @keyframes scrollBackground {
            0% {
                background-position: 100% 0%;
            }
            100% {
                background-position: -100% 100%;
            }
        }
        
        .title-container {
            margin-bottom: 100px;
            text-align: center;
            position: relative;
            top: -10px;
        }
        
        .mobile-title {
            display: block;
        }
        .mobile-title .title-line {
            margin-bottom: 32px;
        }
        .mobile-title .title-line:last-child {
            margin-bottom: 0;
        }

        .title-line {
            display: block;
            position: relative;
            font-weight: 1000;
            font-size: 2.8rem;
            letter-spacing: -0.5px;
            line-height: 1.2;
        }
        
        .title-rectangle {
            position: absolute;
            background-color: rgba(20, 20, 20, 0.97);
            height: 130%;
            width: 110%;
            z-index: -1;
            left: -5%;
            top: -15%;
        }
        .mobile-title .title-line:first-child .title-rectangle {
            transform: rotate(-1.3deg);
        }
        .mobile-title .title-line:last-child .title-rectangle {
            width: 90%;
            left: 5%;
            transform: rotate(1.3deg);
        }
        .desktop-title .title-line .title-rectangle {
            transform: rotate(-1deg);
            width: 110%;
            left: -5%;
        }
        
        .desktop-title {
            display: none;
        }

        
        .items-container {
            width: 100%;
            max-width: 500px;
            position: relative;
            top: -60px;
        }
        
        .item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            position: relative;
            min-height: 80px;
        }
        
        .item-text {
            font-weight: 800;
            font-size: 2rem;
            min-width: 140px;
            text-align: left;
            padding-left: 8px;
            padding-right: 0;
        }
        
        .item-hyphen {
            font-weight: 1000;
            font-size: 2rem;
            padding: 0 15px;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .item-image {
            width: 118px;
            height: 118px;
            margin-left: auto;
            margin-right: 8px;
            background: none;
            border: none;
            display: block;
        }
        
        .divider {
            width: 75%;
            max-width: 375px;
            height: 2px;
            background-color: white;
            margin: 15px auto;
            position: relative;
            top: -60px;
        }
        
        .special-item .item-text {
            font-weight: 800;
        }
        
        .optional-section {
            margin-top: 30px;
            text-align: center;
            position: relative;
            display: none;
            top: -60px;
        }
        
        .optional-text {
            font-weight: 600;
            font-size: 1rem;
            position: relative;
            display: inline-block;
            padding: 5px 10px;
        }
        
        .optional-rectangle {
            position: absolute;
            background-color: rgba(20, 20, 20, 0.95);
            height: 100%;
            width: 100%;
            z-index: -1;
            left: 0;
            top: 0;
            transform: rotate(-1.3deg);
        }
        
        @media (min-width: 768px) {
            .title-container {
                margin-bottom: 40px;
                top: 0;
            }
            
            .mobile-title {
                display: none;
            }
            
            .desktop-title {
                display: block;
            }
            
            .title-line {
                font-size: 3.5rem;
                font-weight: 1000;
            }
            
            .items-container {
                max-width: 600px;
                position: static;
                top: 0;
            }
            
            .item {
                margin-bottom: 32px;
                position: relative;
            }
            
            .item-text {
                position: absolute;
                left: 40px;
                top: 50%;
                transform: translateY(-50%);
                font-size: 2.2rem;
                min-width: 140px;
                text-align: left;
                padding-right: 0;
            }
            
            .item-hyphen {
                position: absolute;
                left: 50%;
                transform: translateX(-50%);
                padding: 0;
            }
            .item-image {
                position: absolute;
                left: calc(50% + 80px);
                top: 50%;
                transform: translateY(-50%);
                margin: 0;
                padding: 0;
                width: 125px;
                height: 125px;
                background: none;
                border: none;
                margin-right: 0;
            }
            
            .divider {
                position: relative;
                top: 0;
                margin: 16px auto;
            }
            
            .optional-text {
                font-size: 1.3rem;
            }
            
            .optional-rectangle {
                background-color: rgba(20, 20, 20, 0.95);
                transform: rotate(1deg);
            }
            
            .optional-section {
                top: 0;
            }

            body::before {
                background-size: calc(5000px * var(--bg-scale)) auto;
                animation: scrollBackground 600s linear infinite;
            }
        }
    </style>
</head>
<body>
    <div class="title-container">
        <div class="mobile-title">
            <span class="title-line">
                Dom Według
                <span class="title-rectangle"></span>
            </span>
            <span class="title-line">
                Śmiechów
                <span class="title-rectangle"></span>
            </span>
        </div>
        
        <div class="desktop-title">
            <span class="title-line">
                Dom Według Śmiechów
                <span class="title-rectangle"></span>
            </span>
        </div>
    </div>
    
    <div class="items-container">
        <div class="item">
            <div class="item-text">Łazienka</div>
            <div class="item-hyphen">–</div>
            <img class="item-image" src="icon.png">
        </div>
        
        <div class="item">
            <div class="item-text">Pranie</div>
            <div class="item-hyphen">–</div>
            <img class="item-image" src="icon.png">
        </div>
        
        <div class="item">
            <div class="item-text">Parter</div>
            <div class="item-hyphen">–</div>
            <img class="item-image" src="icon.png">
        </div>
    </div>
    
    <div class="divider"></div>
    
    <div class="items-container">
        <div class="item special-item">
            <div class="item-text">Deser</div>
            <div class="item-hyphen">–</div>
            <img class="item-image" src="https://dummyimage.com/1920x1080/222/fff&text=M" alt="M">
        </div>
    </div>
    
    <div class="optional-section">
        <span class="optional-text">
            <span id="optional-content"></span>
            <span class="optional-rectangle"></span>
        </span>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // random delay for bg animation
            const randomDelay = Math.random() * -120;
            document.querySelector('body::before') || document.documentElement.style.setProperty('--random-delay', `${randomDelay}s`);
            
            const style = document.createElement('style');
            style.textContent = `
                body::before {
                    animation-delay: ${randomDelay}s;
                }
                @media (min-width: 768px) {
                    body::before {
                        animation-delay: ${Math.random() * -600}s;
                    }
                }
            `;
            document.head.appendChild(style);

            // random bg color
            function okhslToRgb(h, s, l) {
                h = h / 360;
                
                const chroma = s * l * (1 - Math.abs(2 * l - 1));
                const hPrime = h * 6;
                const x = chroma * (1 - Math.abs((hPrime % 2) - 1));
                const yellowBoost = 0;
                
                let r, g, b;
                if (hPrime >= 0 && hPrime < 1) {
                    r = chroma; g = x; b = 0;
                } else if (hPrime >= 1 && hPrime < 2) {
                    r = x; g = chroma; b = 0;
                } else if (hPrime >= 2 && hPrime < 3) {
                    r = 0; g = chroma; b = x;
                } else if (hPrime >= 3 && hPrime < 4) {
                    r = 0; g = x; b = chroma;
                } else if (hPrime >= 4 && hPrime < 5) {
                    r = x; g = 0; b = chroma;
                } else {
                    r = chroma; g = 0; b = x;
                }
                // boost yellow tones
                r += yellowBoost/2;
                g += yellowBoost/2;
                
                const m = l - chroma / 2;
                return [
                    Math.round((r + m) * 255),
                    Math.round((g + m) * 255),
                    Math.round((b + m) * 255)
                ];
            }

            const randomHue = Math.floor(Math.random() * 360);
            const saturation = 1.45;
            const lightness = 0.35;
            
            const [r, g, b] = okhslToRgb(randomHue, saturation, lightness);
            document.body.style.backgroundColor = `rgb(${r}, ${g}, ${b})`;
            
            // random image rotation
            const imageNodes = document.querySelectorAll('.item-image');
            const isDesktop = window.innerWidth >= 768;

            imageNodes.forEach(image => {
                const randomRotation = Math.floor(Math.random() * 101) - 40;
                if (isDesktop) {
                    image.style.transform = `translateY(-50%) rotate(${randomRotation}deg)`;
                } else {
                    image.style.transform = `rotate(${randomRotation}deg)`;
                }
            });
            
            const optionalText = document.querySelector('.optional-text');
            if (optionalText.textContent.trim() !== '') {
                document.querySelector('.optional-section').style.display = 'block';
            }


            // weekly random number
            const referenceDate = new Date('2024-01-07');
            
            const now = new Date();
            let currentDate = new Date(now.toLocaleString("en-US", {timeZone: "Europe/Warsaw"}));
            
            // testing date - remove later
            currentDate = new Date('2025-08-30');
            
            const dayOfWeek = currentDate.getDay();
            const startOfWeek = new Date(currentDate);
            startOfWeek.setDate(currentDate.getDate() - dayOfWeek);
            
            const millisecondsPerWeek = 7 * 24 * 60 * 60 * 1000;
            const weeksSinceReference = Math.floor((startOfWeek - referenceDate) / millisecondsPerWeek);

            //patterns
            
            const rotationPatterns = [
                ["L", "F", "M"],  // Week 0 (reference week): Sep 7, 2025
                ["M", "L", "F"],  // Week 1: Sep 14, 2025
                ["F", "M", "L"]   // Week 2: Sep 21, 2025
            ];
            
            // Deser rotation (easy to change order)
            // Week 0 (reference): P, then T, M, L, F, then repeat
            const deserRotation = ["P", "T", "M", "L", "F"];

            const patternIndex = ((weeksSinceReference % 3) + 3) % 3;
            const currentPattern = rotationPatterns[patternIndex];

            // Get current rotation for Deser
            const deserIndex = ((weeksSinceReference % deserRotation.length) + deserRotation.length) % deserRotation.length;
            const currentDeserLetter = deserRotation[deserIndex];


            
            function seededRandom(seed) {
                let x = Math.sin(seed * 9999) * 10000;
                x = x - Math.floor(x);
                x = Math.sin(x * 6.28318) * 0.5 + 0.5;
                x = Math.abs(x);
                x = Math.round(x * 100) / 100;
                
                return x === 1.00 ? 0.99 : x;
            }
            
            const rand1 = seededRandom(weeksSinceReference + 12345);
            const rand2 = seededRandom(weeksSinceReference + 23456);
            const rand3 = seededRandom(weeksSinceReference + 34567);
            const rand4 = seededRandom(weeksSinceReference + 45678);
            

            // display images
            const T = 1;
            const P = 1;
            const F = 1;
            const L = -1;
            const M = 1;

            const indexToLetter = {
                0: 'T',
                1: 'P',
                2: 'F',
                3: 'L',
                4: 'M'
            };

            const imageElements = [
                document.querySelector('.item:nth-of-type(1) .item-image'),
                document.querySelector('.item:nth-of-type(2) .item-image'),
                document.querySelector('.item:nth-of-type(3) .item-image'),
                document.querySelector('.special-item .item-image')
            ];
            
            const randArr = [rand1, rand2, rand3, rand4];
            const letterToInt = { T, P, F, L, M };

            imageElements.forEach((img, idx) => {
                if(idx < 3) {
                    var letter = currentPattern[idx];
                } else {
                    var letter = currentDeserLetter;
                }
                const imageCount = letterToInt[letter];
                
                if(imageCount === -1) {
                    // Fetch a random monkey image
                    const unique = Date.now();
                    img.src = `https://www.placemonkeys.com/200?random=${unique}`;
                } else if(imageCount == 0) {
                    img.src = `https://dummyimage.com/1920x1080/222/fff&text=${letter}`;
                    img.alt = letter;  
                } else if(imageCount == 1){
                    img.src = `${letter}/1.png`;
                    img.alt = `${letter}`;
                } else if(imageCount > 1){
                    const imageIndex = Math.floor(randArr[idx] * imageCount) + 1;
                    img.src = `${letter}/${imageIndex}.png`;
                    img.alt = `${letter}`;
                }
            });
            
            
            // show optional text
            //OPTIONAL TEXT
            const optionalTextContent = ``;
            
            const optionalContentElement = document.getElementById('optional-content');
            optionalContentElement.textContent = optionalTextContent;
            
            if (optionalTextContent.trim() !== '') {
                document.querySelector('.optional-section').style.display = 'block';
            }
        });
    </script>
</body>
</html>










